import{h as de,i as le,j as ue,k as j,l as ve}from"./chunk-3ULHBRQA.js";import{b as fe}from"./chunk-GKNBFJRL.js";import{a as Y,b as f,c as Z,d as ee,e as T,g as b,i as te,j as ie,k as ne,l as re,m as oe,n as pe,s as me,u as se}from"./chunk-Q73L2NTX.js";import{A as $,Aa as M,Db as I,Ea as B,Eb as Q,Fa as m,Fb as k,Ga as D,Gb as E,Ha as H,Hb as W,Ia as J,Jb as V,L as z,La as K,Nb as ce,Ob as ae,S as N,Va as S,X as d,Y as A,aa as F,ba as _,c as q,ia as y,ka as c,la as l,m as U,o as h,qa as x,qb as w,sa as a,ua as p,va as o,wa as s,xa as P,ya as R,za as X}from"./chunk-BKH2LAIR.js";var Ie=n=>[n],ge=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:8,vars:7,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt"]],template:function(t,r){t&1&&(p(0,"a",0)(1,"div",1)(2,"h4",2),m(3),o(),p(4,"p",3),m(5),o()(),p(6,"span",4),s(7,"img",5),o()()),t&2&&(a("routerLink",K(5,Ie,r.index)),c(3),D(r.recipe.name),c(2),D(r.recipe.description),c(2),M("alt",r.recipe.name),a("src",r.recipe.imagePath,y))},dependencies:[E,W]});let n=e;return n})();function Fe(n,e){if(n&1&&s(0,"app-recipe-item",4),n&2){let g=e.$implicit,i=e.index;a("recipe",g)("index",i)}}var be=(()=>{let e=class e{constructor(i,t){this.route=i,this.store=t}ngOnInit(){this.subscription=this.store.select("recipes").pipe(h(i=>i.recipes)).subscribe(i=>{this.recipes=i})}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(l(I),l(w))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],["routerLink","new",1,"btn","btn-success"],[3,"recipe","index",4,"ngFor","ngForOf"],[3,"recipe","index"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1)(2,"button",2),m(3,"New Recipe"),o()()(),s(4,"hr"),p(5,"div",0)(6,"div",1),x(7,Fe,1,2,"app-recipe-item",3),o()()),t&2&&(c(7),a("ngForOf",r.recipes))},dependencies:[S,E,ge]});let n=e;return n})();var Ce=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1),s(2,"app-recipe-list"),o(),p(3,"div",2),s(4,"router-outlet"),o()())},dependencies:[Q,be]});let n=e;return n})();var ye=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d({type:e,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(t,r){t&1&&(p(0,"h3"),m(1,"Please select a recipe"),o())}});let n=e;return n})();function Ne(n,e){if(n&1){let g=P();p(0,"div",17)(1,"div",18),s(2,"input",19),o(),p(3,"div",20),s(4,"input",21),o(),p(5,"div",20)(6,"button",5),R("click",function(){let t=F(g).index,r=X();return _(r.onDeleteIngredient(t))}),m(7,"X"),o()()()}if(n&2){let g=e.index;a("formGroupName",g)}}var G=(()=>{let e=class e{constructor(i,t,r){this.route=i,this.router=t,this.store=r,this.editMode=!1}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.editMode=i.id!=null,this.initForm()})}initForm(){let i="",t="",r="",u=new me([]);this.editMode&&(this.storeSub=this.store.select("recipes").pipe(h(v=>v.recipes.find((O,we)=>we===this.id))).subscribe(v=>{i=v.name,t=v.imagePath,r=v.description,v.ingredients.forEach(O=>{u.push(new T({name:new b(O.name,f.required),amount:new b(O.amount,[f.required,f.pattern(/^[1-9]+[0-9]*$/)])}))})})),this.recipeForm=new T({name:new b(i,f.required),imagePath:new b(t,f.required),description:new b(r,f.required),ingredients:u})}get getIngredientControls(){return this.recipeForm.get("ingredients").controls}onAddIngredient(){this.recipeForm.get("ingredients").push(new T({name:new b(null,f.required),amount:new b(null,[f.required,f.pattern(/^[1-9]+[0-9]*$/)])}))}onDeleteIngredient(i){this.recipeForm.get("ingredients").removeAt(i)}onSubmit(){return q(this,null,function*(){if(this.editMode)this.store.dispatch(le({index:this.id,newRecipe:this.recipeForm.value})),this.onCancel();else{this.store.dispatch(de({recipe:this.recipeForm.value}));let t=yield U(this.store.select("recipes").pipe($(1),h(r=>r.recipes.length-1)));this.router.navigate(["../",t],{relativeTo:this.route})}})}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}ngOnDestroy(){this.storeSub&&this.storeSub.unsubscribe()}};e.\u0275fac=function(t){return new(t||e)(l(I),l(k),l(w))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-edit"]],decls:39,vars:4,consts:[["imagePath",""],[1,"row"],[1,"col-xs-12"],[3,"ngSubmit","formGroup"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],["alt","Recipe Image",1,"img-responsive",3,"src"],["for","description"],["type","text","id","description","formControlName","description","rows","6",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(t,r){if(t&1){let u=P();p(0,"div",1)(1,"div",2)(2,"form",3),R("ngSubmit",function(){return F(u),_(r.onSubmit())}),p(3,"div",1)(4,"div",2)(5,"button",4),m(6,"Save"),o(),p(7,"button",5),R("click",function(){return F(u),_(r.onCancel())}),m(8,"Cancel"),o()()(),p(9,"div",1)(10,"div",2)(11,"div",6)(12,"label",7),m(13,"Name"),o(),s(14,"input",8),o()()(),p(15,"div",1)(16,"div",2)(17,"div",6)(18,"label",9),m(19,"Image URL"),o(),s(20,"input",10,0),o()()(),p(22,"div",1)(23,"div",2),s(24,"img",11),o()(),p(25,"div",1)(26,"div",2)(27,"div",6)(28,"label",12),m(29,"Description"),o(),s(30,"textarea",13),o()()(),p(31,"div",1)(32,"div",14),x(33,Ne,8,1,"div",15),s(34,"hr"),p(35,"div",1)(36,"div",2)(37,"button",16),R("click",function(){return F(u),_(r.onAddIngredient())}),m(38,"Add Ingredient"),o()()()()()()()()}if(t&2){let u=B(21);c(2),a("formGroup",r.recipeForm),c(3),a("disabled",!r.recipeForm.valid),c(19),a("src",u.value,y),c(9),a("ngForOf",r.getIngredientControls)}},dependencies:[S,te,Y,ie,Z,ee,ne,pe,re,oe],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]});let n=e;return n})();function Ae(n,e){if(n&1&&(p(0,"li",11),m(1),o()),n&2){let g=e.$implicit;c(),J(" ",g.name," - (",g.amount,") ")}}var xe=(()=>{let e=class e{constructor(i,t,r){this.route=i,this.router=t,this.store=r}ngOnInit(){this.route.params.pipe(h(i=>+i.id),z(i=>(this.currentRecipeId=i,this.store.select("recipes"))),h(i=>i.recipes.find((t,r)=>r===this.currentRecipeId))).subscribe(i=>{this.currentRecipe=i})}onAddToShoppingList(){this.store.dispatch(fe({ingredients:this.currentRecipe.ingredients}))}onDeleteRecipe(){this.store.dispatch(ue({index:this.currentRecipeId})),this.router.navigate(["/recipes"])}};e.\u0275fac=function(t){return new(t||e)(l(I),l(k),l(w))},e.\u0275cmp=d({type:e,selectors:[["app-recipe-detail"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[2,"cursor","pointer",3,"click"],["routerLink","edit",2,"cursor","pointer"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"div",1),s(2,"img",2),o()(),p(3,"div",0)(4,"div",1)(5,"h1"),m(6),o()()(),p(7,"div",0)(8,"div",1)(9,"div",3)(10,"button",4),m(11," Manage Recipe "),s(12,"span",5),o(),p(13,"ul",6)(14,"li")(15,"a",7),R("click",function(){return r.onAddToShoppingList()}),m(16,"To Shopping List"),o()(),p(17,"li")(18,"a",8),m(19,"Edit Recipe"),o()(),p(20,"li")(21,"a",7),R("click",function(){return r.onDeleteRecipe()}),m(22,"Delete Recipe"),o()()()()()(),p(23,"div",0)(24,"div",1),m(25),o()(),p(26,"div",0)(27,"div",1)(28,"ul",9),x(29,Ae,2,2,"li",10),o()()()),t&2&&(c(2),M("alt",r.currentRecipe.name),a("src",r.currentRecipe.imagePath,y),c(4),D(r.currentRecipe.name),c(19),H(" ",r.currentRecipe.description," "),c(4),a("ngForOf",r.currentRecipe.ingredients))},dependencies:[ce,S,E]});let n=e;return n})();var Me=[{path:"",component:Ce,canActivate:[ve],children:[{path:"",component:ye,pathMatch:"full"},{path:"new",component:G},{path:":id",component:xe,resolve:[j]},{path:":id/edit",component:G,resolve:[j]}]}],Se=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A({type:e}),e.\u0275inj=N({imports:[V.forChild(Me),V]});let n=e;return n})();var ft=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=A({type:e}),e.\u0275inj=N({imports:[ae,se,Se]});let n=e;return n})();export{ft as RecipesModule};
