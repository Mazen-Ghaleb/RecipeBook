import{A as E,B as U,D as H,E as V,F as C,Fb as F,G,L as B,R as p,S as I,T as a,U as o,V as S,Y as y,a as g,d as N,e as k,ea as z,fb as d,gb as h,k as _,o as u,ob as K,p as M,qb as l,tb as b,u as O,ub as A,w as v,x as $}from"./chunk-BKH2LAIR.js";var pt={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},T="__@ngrx/effects_create__";function se(t,e={}){let i=e.functional?t:t(),r=g(g({},pt),e);return Object.defineProperty(i,T,{value:r}),i}function lt(t){return Object.getOwnPropertyNames(t).filter(r=>t[r]&&t[r].hasOwnProperty(T)?t[r][T].hasOwnProperty("dispatch"):!1).map(r=>{let n=t[r][T];return g({propertyName:r},n)})}function Et(t){return lt(t)}function q(t){return Object.getPrototypeOf(t)}function ht(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Q(t){return typeof t=="function"}function L(t){return t.filter(Q)}function mt(t){return t instanceof a||Q(t)}function Rt(t,e,i){let r=q(t),s=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,c=Et(t).map(({propertyName:f,dispatch:m,useEffectsErrorHandler:w})=>{let R=typeof t[f]=="function"?t[f]():t[f],P=w?i(R,e):R;return m===!1?P.pipe(U()):P.pipe(G()).pipe(u(dt=>({effect:t[f],notification:dt,propertyName:f,sourceName:s,sourceInstance:t})))});return O(...c)}var gt=10;function W(t,e,i=gt){return t.pipe($(r=>(e&&e.handleError(r),i<=1?t:W(t,e,i-1))))}var tt=(()=>{let e=class e extends N{constructor(r){super(),r&&(this.source=r)}lift(r){let n=new e;return n.source=this,n.operator=r,n}};e.\u0275fac=function(n){return new(n||e)(o(K))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function et(...t){return v(e=>t.some(i=>typeof i=="string"?i===e.type:i.type===e.type))}var rt=new a("@ngrx/effects Internal Root Guard"),j=new a("@ngrx/effects User Provided Effects"),x=new a("@ngrx/effects Internal Root Effects"),nt=new a("@ngrx/effects Internal Root Effects Instances"),Y=new a("@ngrx/effects Internal Feature Effects"),it=new a("@ngrx/effects Internal Feature Effects Instance Groups"),vt=new a("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>W}),ot="@ngrx/effects/init",ce=d(ot);function It(t,e){if(t.notification.kind==="N"){let i=t.notification.value;!St(i)&&e.handleError(new Error(`Effect ${yt(t)} dispatched an invalid action: ${Ft(i)}`))}}function St(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function yt({propertyName:t,sourceInstance:e,sourceName:i}){let r=typeof e[t]=="function";return!!i?`"${i}.${String(t)}${r?"()":""}"`:`"${String(t)}()"`}function Ft(t){try{return JSON.stringify(t)}catch{return t}}var jt="ngrxOnIdentifyEffects";function Tt(t){return D(t,jt)}var Mt="ngrxOnRunEffects";function Ot(t){return D(t,Mt)}var Ct="ngrxOnInitEffects";function bt(t){return D(t,Ct)}function D(t,e){return t&&e in t&&typeof t[e]=="function"}var st=(()=>{let e=class e extends k{constructor(r,n){super(),this.errorHandler=r,this.effectsErrorHandler=n}addEffects(r){this.next(r)}toActions(){return this.pipe(C(r=>ht(r)?q(r):r),M(r=>r.pipe(C(At))),M(r=>{let n=r.pipe(V(c=>xt(this.errorHandler,this.effectsErrorHandler)(c)),u(c=>(It(c,this.errorHandler),c.notification)),v(c=>c.kind==="N"&&c.value!=null),H()),s=r.pipe(E(1),v(bt),u(c=>c.ngrxOnInitEffects()));return O(n,s)}))}};e.\u0275fac=function(n){return new(n||e)(o(z),o(vt))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function At(t){return Tt(t)?t.ngrxOnIdentifyEffects():""}function xt(t,e){return i=>{let r=Rt(i,t,e);return Ot(i)?i.ngrxOnRunEffects(r):r}}var ct=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(r,n){this.effectSources=r,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(n){return new(n||e)(o(st),o(l))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ft=(()=>{let e=class e{constructor(r,n,s,c,f,m,w){this.sources=r,n.start();for(let R of c)r.addEffects(R);s.dispatch({type:ot})}addEffects(r){this.sources.addEffects(r)}};e.\u0275fac=function(n){return new(n||e)(o(st),o(ct),o(l),o(nt),o(b,8),o(A,8),o(rt,8))},e.\u0275mod=y({type:e}),e.\u0275inj=I({});let t=e;return t})(),Dt=(()=>{let e=class e{constructor(r,n,s,c){let f=n.flat();for(let m of f)r.addEffects(m)}};e.\u0275fac=function(n){return new(n||e)(o(ft),o(it),o(b,8),o(A,8))},e.\u0275mod=y({type:e}),e.\u0275inj=I({});let t=e;return t})(),fe=(()=>{let e=class e{static forFeature(...r){let n=r.flat(),s=L(n);return{ngModule:Dt,providers:[s,{provide:Y,multi:!0,useValue:n},{provide:j,multi:!0,useValue:[]},{provide:it,multi:!0,useFactory:J,deps:[Y,j]}]}}static forRoot(...r){let n=r.flat(),s=L(n);return{ngModule:ft,providers:[s,{provide:x,useValue:[n]},{provide:rt,useFactory:wt},{provide:j,multi:!0,useValue:[]},{provide:nt,useFactory:J,deps:[x,j]}]}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=y({type:e}),e.\u0275inj=I({});let t=e;return t})();function J(t,e){let i=[];for(let r of t)i.push(...r);for(let r of e)i.push(...r);return i.map(r=>mt(r)?S(r):r)}function wt(){let t=S(ct,{optional:!0,skipSelf:!0}),e=S(x,{self:!0});if(!(e.length===1&&e[0].length===0)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var Nt="[Recipes] Set Recipes",kt="[Recipes] Store Recipes",_t="[Recipes] Fetch Recipes",$t="[Recipes] Add Recipe",Ut="[Recipes] Update Recipe",Ht="[Recipes] Delete Recipe",ut=d(Nt,h()),de=d(kt),at=d(_t),pe=d($t,h()),le=d(Ut,h()),Ee=d(Ht,h());var Re=(()=>{let e=class e{constructor(r,n,s){this.store=r,this.actions$=n,this.router=s}resolve(r,n){let s=+r.params.id;return this.store.select("recipes").pipe(E(1),u(c=>c.recipes),B(c=>c.length===0?(this.store.dispatch(at()),this.actions$.pipe(et(ut),E(1),u(f=>((s<0||s>=f.recipes.length)&&this.router.navigate(["/recipes"]),f.recipes)))):((s<0||s>=c.length)&&this.router.navigate(["/recipes"]),_(c))))}};e.\u0275fac=function(n){return new(n||e)(o(l),o(tt),o(F))},e.\u0275prov=p({token:e,factory:e.\u0275fac});let t=e;return t})();var Ie=(()=>{let e=class e{constructor(r,n){this.router=r,this.store=n}canActivate(r,n){return this.store.select("auth").pipe(E(1),u(s=>s.user),u(s=>s?!0:this.router.createUrlTree(["/auth"])))}};e.\u0275fac=function(n){return new(n||e)(o(F),o(l))},e.\u0275prov=p({token:e,factory:e.\u0275fac});let t=e;return t})();export{se as a,tt as b,et as c,fe as d,ut as e,de as f,at as g,pe as h,le as i,Ee as j,Re as k,Ie as l};
