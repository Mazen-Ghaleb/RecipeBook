import{a as ct,b as ht,c as Nt,d as Mt,e as Dt,f as W,g as Si}from"./chunk-WJKLNZU6.js";import{a as V,b as Ct,c as H,d as di,e as Lt,f as jt,g as _t,h as yi,i as Ti,j as Ri,k as Ni,l as Mi}from"./chunk-3ULHBRQA.js";import{a as bi,b as wi,c as xi,d as Oi,e as Ci,f as ki}from"./chunk-GKNBFJRL.js";import{$a as Je,A as L,Ab as fi,Bb as oe,C as Le,Cb as se,E as je,Eb as mi,Fa as $,Fb as kt,Gb as gi,H as _e,Hb as Ei,I as Pe,Ib as Ai,J as Fe,Jb as ae,K as Ue,Ka as We,L as x,M as At,N as K,Nb as Ii,O as G,Ob as vi,Pa as Ke,Qa as te,R as T,Ra as Ge,S as k,T as U,U as d,V as It,Va as qe,W as ze,Wa as Ze,X as vt,Y as N,Ya as ee,Za as Ye,_ as tt,_a as xt,a as l,aa as St,ab as Xe,b as m,ba as yt,bb as Qe,ca as $e,cb as ti,d as Zt,da as Ve,db as ei,e as Re,ea as Tt,eb as ii,f as be,fb as ot,g as we,gb as st,h as xe,ha as Xt,hb as ie,i as Oe,ib as Ot,ja as He,jb as ri,k as F,ka as q,kb as ni,l as Ce,la as Rt,lb as oi,mb as si,n as ke,nb as re,o as v,oa as bt,ob as ai,pb as ci,q as Ne,qa as et,qb as M,r as Yt,rb as ui,sa as it,sb as pi,t as Jt,ta as Be,u as X,ua as R,v as Q,va as b,vb as li,w as C,wa as rt,wb as y,x as dt,xa as Qt,xb as at,y as Me,ya as nt,yb as ne,z as De,za as wt,zb as hi}from"./chunk-BKH2LAIR.js";var mt="Service workers are disabled or not supported by this browser";function Dr(e){return Yt(()=>Ce(new Error(e)))}var ut=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=Dr(mt);else{let i=Jt(t,"controllerchange").pipe(v(()=>t.controller)),r=Yt(()=>F(t.controller)),n=Ne(r,i);this.worker=n.pipe(C(p=>!!p)),this.registration=this.worker.pipe(x(()=>t.getRegistration()));let h=Jt(t,"message").pipe(v(p=>p.data)).pipe(C(p=>p&&p.type)).pipe(_e());h.connect(),this.events=h}}postMessage(t,o){return this.worker.pipe(L(1),K(i=>{i.postMessage(l({action:t},o))})).toPromise().then(()=>{})}postMessageWithOperation(t,o,i){let r=this.waitForOperationCompleted(i),n=this.postMessage(t,o);return Promise.all([n,r]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let o;return typeof t=="string"?o=i=>i.type===t:o=i=>t.includes(i.type),this.events.pipe(C(o))}nextEventOfType(t){return this.eventsOfType(t).pipe(L(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(C(o=>o.nonce===t),L(1),v(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},_i=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,this.pushManager=null,this.subscriptionChanges=new Re,!i.isEnabled){this.messages=Q,this.notificationClicks=Q,this.subscription=Q;return}this.messages=this.sw.eventsOfType("PUSH").pipe(v(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(v(n=>n.data)),this.pushManager=this.sw.registration.pipe(v(n=>n.pushManager));let r=this.pushManager.pipe(x(n=>n.getSubscription()));this.subscription=X(r,this.subscriptionChanges)}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(mt));let r={userVisibleOnly:!0},n=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(n.length));for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return r.applicationServerKey=a,this.pushManager.pipe(x(s=>s.subscribe(r)),L(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let i=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(n=>{if(!n)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(L(1),x(i)).toPromise()}decodeBase64(i){return atob(i)}};t.\u0275fac=function(r){return new(r||t)(d(ut))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})(),Pi=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=Q,this.unrecoverable=Q;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mt));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}};t.\u0275fac=function(r){return new(r||t)(d(ut))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Di=new U("");function Lr(e,t,o,i){return()=>{if(!(ee(i)&&"serviceWorker"in navigator&&o.enabled!==!1))return;let r=e.get(bt),n=e.get(te);r.runOutsideAngular(()=>{let s=navigator.serviceWorker,c=()=>s.controller?.postMessage({action:"INITIALIZE"});s.addEventListener("controllerchange",c),n.onDestroy(()=>{s.removeEventListener("controllerchange",c)})});let a;if(typeof o.registrationStrategy=="function")a=o.registrationStrategy();else{let[s,...c]=(o.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":a=F(null);break;case"registerWithDelay":a=Li(+c[0]||0);break;case"registerWhenStable":a=c[0]?X(ji(e),Li(+c[0])):ji(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`)}}r.runOutsideAngular(()=>a.pipe(L(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:o.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function Li(e){return F(null).pipe(Le(e))}function ji(e){return e.get(te).isStable.pipe(C(o=>o))}function jr(e,t){return new ut(ee(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var ft=class{};function _r(e,t={}){return tt([_i,Pi,{provide:Di,useValue:e},{provide:ft,useValue:t},{provide:ut,useFactory:jr,deps:[ft,Xt]},{provide:Ke,useFactory:Lr,deps:[Ve,Di,ft,Xt],multi:!0}])}var Fi=(()=>{let t=class t{static register(i,r={}){return{ngModule:t,providers:[_r(i,r)]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=k({providers:[_i,Pi]});let e=t;return e})();var Et="PERFORM_ACTION",Pr="REFRESH",Bi="RESET",Wi="ROLLBACK",Ki="COMMIT",Gi="SWEEP",qi="TOGGLE_ACTION",Fr="SET_ACTIONS_ACTIVE",Zi="JUMP_TO_STATE",Yi="JUMP_TO_ACTION",ve="IMPORT_STATE",Ji="LOCK_CHANGES",Xi="PAUSE_RECORDING",pt=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=Et,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},ce=class{constructor(){this.type=Pr}},ue=class{constructor(t){this.timestamp=t,this.type=Bi}},pe=class{constructor(t){this.timestamp=t,this.type=Wi}},le=class{constructor(t){this.timestamp=t,this.type=Ki}},de=class{constructor(){this.type=Gi}},he=class{constructor(t){this.id=t,this.type=qi}};var fe=class{constructor(t){this.index=t,this.type=Zi}},me=class{constructor(t){this.actionId=t,this.type=Yi}},ge=class{constructor(t){this.nextLiftedState=t,this.type=ve}},Ee=class{constructor(t){this.status=t,this.type=Ji}},Ae=class{constructor(t){this.status=t,this.type=Xi}};var zt=new U("@ngrx/store-devtools Options"),Ui=new U("@ngrx/store-devtools Initial Config");function Qi(){return null}var Ur="NgRx Store DevTools";function zr(e){let t={maxAge:!1,monitor:Qi,actionSanitizer:void 0,stateSanitizer:void 0,name:Ur,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,i=o.logOnly?{pause:!0,export:!0,test:!0}:!1,r=o.features||i||t.features;r.import===!0&&(r.import="custom");let n=Object.assign({},t,{features:r},o);if(n.maxAge&&n.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${n.maxAge}`);return n}function zi(e,t){return e.filter(o=>t.indexOf(o)<0)}function tr(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:r}=t[t.length-1];return r}let{state:i}=t[o];return i}function gt(e){return new pt(e,+Date.now())}function $r(e,t){return Object.keys(t).reduce((o,i)=>{let r=Number(i);return o[r]=er(e,t[r],r),o},{})}function er(e,t,o){return m(l({},t),{action:e(t.action,o)})}function Vr(e,t){return t.map((o,i)=>({state:ir(e,o.state,i),error:o.error}))}function ir(e,t,o){return e(t,o)}function rr(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function Hr(e,t,o,i){let r=[],n={},a=[];return e.stagedActionIds.forEach((s,c)=>{let h=e.actionsById[s];h&&(c&&Se(e.computedStates[c],h,t,o,i)||(n[s]=h,r.push(s),a.push(e.computedStates[c])))}),m(l({},e),{stagedActionIds:r,actionsById:n,computedStates:a})}function Se(e,t,o,i,r){let n=o&&!o(e,t.action),a=i&&!t.action.type.match(i.map(c=>$i(c)).join("|")),s=r&&t.action.type.match(r.map(c=>$i(c)).join("|"));return n||a||s}function $i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nr(e){return{ngZone:e?It(bt):null,connectInZone:e}}var $t=(()=>{let t=class t extends Ot{};t.\u0275fac=(()=>{let i;return function(n){return(i||(i=$e(t)))(n||t)}})(),t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})(),Pt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Ie=new U("@ngrx/store-devtools Redux Devtools Extension"),or=(()=>{let t=class t{constructor(i,r,n){this.config=r,this.dispatcher=n,this.zoneConfig=nr(this.config.connectInZone),this.devtoolsExtension=i,this.createActionStreams()}notify(i,r){if(this.devtoolsExtension)if(i.type===Et){if(r.isLocked||r.isPaused)return;let n=tr(r);if(rr(this.config)&&Se(n,i,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?ir(this.config.stateSanitizer,n,r.currentStateIndex):n,s=this.config.actionSanitizer?er(this.config.actionSanitizer,i,r.nextActionId):i;this.sendToReduxDevtools(()=>this.extensionConnection.send(s,a))}else{let n=m(l({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?$r(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Vr(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Zt(i=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(n=>i.next(n)),r.unsubscribe}):xe}createActionStreams(){let i=this.createChangesObservable().pipe(Fe()),r=i.pipe(C(p=>p.type===Pt.START)),n=i.pipe(C(p=>p.type===Pt.STOP)),a=i.pipe(C(p=>p.type===Pt.DISPATCH),v(p=>this.unwrapAction(p.payload)),Me(p=>p.type===ve?this.dispatcher.pipe(C(u=>u.type===re),ke(1e3),De(1e3),v(()=>p),dt(()=>F(p)),L(1)):F(p))),c=i.pipe(C(p=>p.type===Pt.ACTION),v(p=>this.unwrapAction(p.payload))).pipe(At(n)),h=a.pipe(At(n));this.start$=r.pipe(At(n)),this.actions$=this.start$.pipe(x(()=>c)),this.liftedActions$=this.start$.pipe(x(()=>h))}unwrapAction(i){return typeof i=="string"?(0,eval)(`(${i})`):i}getExtensionConfig(i){let r={name:i.name,features:i.features,serialize:i.serialize,autoPause:i.autoPause??!1,trace:i.trace??!1,traceLimit:i.traceLimit??75};return i.maxAge!==!1&&(r.maxAge=i.maxAge),r}sendToReduxDevtools(i){try{i()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};t.\u0275fac=function(r){return new(r||t)(d(Ie),d(zt),d($t))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})(),Ut={type:ie},Br="@ngrx/store-devtools/recompute",Wr={type:Br};function sr(e,t,o,i,r){if(i)return{state:o,error:"Interrupted by an error up the chain"};let n=o,a;try{n=e(o,t)}catch(s){a=s.toString(),r.handleError(s)}return{state:n,error:a}}function Ft(e,t,o,i,r,n,a,s,c){if(t>=e.length&&e.length===n.length)return e;let h=e.slice(0,t),p=n.length-(c?1:0);for(let u=t;u<p;u++){let A=n[u],O=r[A].action,g=h[u-1],f=g?g.state:i,_=g?g.error:void 0,P=a.indexOf(A)>-1?g:sr(o,O,f,_,s);h.push(P)}return c&&h.push(e[e.length-1]),h}function Kr(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:gt(Ut)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Gr(e,t,o,i,r={}){return n=>(a,s)=>{let{monitorState:c,actionsById:h,nextActionId:p,stagedActionIds:u,skippedActionIds:A,committedState:O,currentStateIndex:g,computedStates:f,isLocked:_,isPaused:w}=a||t;a||(h=Object.create(h));function P(S){let I=S,B=u.slice(1,I+1);for(let D=0;D<B.length;D++)if(f[D+1].error){I=D,B=u.slice(1,I+1);break}else delete h[B[D]];A=A.filter(D=>B.indexOf(D)===-1),u=[0,...u.slice(I+1)],O=f[I].state,f=f.slice(I),g=g>I?g-I:0}function J(){h={0:gt(Ut)},p=1,u=[0],A=[],O=f[g].state,g=0,f=[]}let E=0;switch(s.type){case Ji:{_=s.status,E=1/0;break}case Xi:{w=s.status,w?(u=[...u,p],h[p]=new pt({type:"@ngrx/devtools/pause"},+Date.now()),p++,E=u.length-1,f=f.concat(f[f.length-1]),g===u.length-2&&g++,E=1/0):J();break}case Bi:{h={0:gt(Ut)},p=1,u=[0],A=[],O=e,g=0,f=[];break}case Ki:{J();break}case Wi:{h={0:gt(Ut)},p=1,u=[0],A=[],g=0,f=[];break}case qi:{let{id:S}=s;A.indexOf(S)===-1?A=[S,...A]:A=A.filter(B=>B!==S),E=u.indexOf(S);break}case Fr:{let{start:S,end:I,active:B}=s,D=[];for(let qt=S;qt<I;qt++)D.push(qt);B?A=zi(A,D):A=[...A,...D],E=u.indexOf(S);break}case Zi:{g=s.index,E=1/0;break}case Yi:{let S=u.indexOf(s.actionId);S!==-1&&(g=S),E=1/0;break}case Gi:{u=zi(u,A),A=[],g=Math.min(g,u.length-1);break}case Et:{if(_)return a||t;if(w||a&&Se(a.computedStates[g],s,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let I=f[f.length-1];f=[...f.slice(0,-1),sr(n,s.action,I.state,I.error,o)],E=1/0;break}r.maxAge&&u.length===r.maxAge&&P(1),g===u.length-1&&g++;let S=p++;h[S]=s,u=[...u,S],E=u.length-1;break}case ve:{({monitorState:c,actionsById:h,nextActionId:p,stagedActionIds:u,skippedActionIds:A,committedState:O,currentStateIndex:g,computedStates:f,isLocked:_,isPaused:w}=s.nextLiftedState);break}case ie:{E=0,r.maxAge&&u.length>r.maxAge&&(f=Ft(f,E,n,O,h,u,A,o,w),P(u.length-r.maxAge),E=1/0);break}case re:{if(f.filter(I=>I.error).length>0)E=0,r.maxAge&&u.length>r.maxAge&&(f=Ft(f,E,n,O,h,u,A,o,w),P(u.length-r.maxAge),E=1/0);else{if(!w&&!_){g===u.length-1&&g++;let I=p++;h[I]=new pt(s,+Date.now()),u=[...u,I],E=u.length-1,f=Ft(f,E,n,O,h,u,A,o,w)}f=f.map(I=>m(l({},I),{state:n(I.state,Wr)})),g=u.length-1,r.maxAge&&u.length>r.maxAge&&P(u.length-r.maxAge),E=1/0}break}default:{E=1/0;break}}return f=Ft(f,E,n,O,h,u,A,o,w),c=i(c,s),{monitorState:c,actionsById:h,nextActionId:p,stagedActionIds:u,skippedActionIds:A,committedState:O,currentStateIndex:g,computedStates:f,isLocked:_,isPaused:w}}}var Vi=(()=>{let t=class t{constructor(i,r,n,a,s,c,h,p){let u=Kr(h,p.monitor),A=Gr(h,u,c,p.monitor,p),O=X(X(r.asObservable().pipe(Ue(1)),a.actions$).pipe(v(gt)),i,a.liftedActions$).pipe(Oe(we)),g=n.pipe(v(A)),f=nr(p.connectInZone),_=new be(1);this.liftedStateSubscription=O.pipe(G(g),Hi(f),Pe(({state:J},[E,S])=>{let I=S(J,E);return E.type!==Et&&rr(p)&&(I=Hr(I,p.predicate,p.actionsSafelist,p.actionsBlocklist)),a.notify(E,I),{state:I,action:E}},{state:u,action:null})).subscribe(({state:J,action:E})=>{if(_.next(J),E.type===Et){let S=E.action;s.next(S)}}),this.extensionStartSubscription=a.start$.pipe(Hi(f)).subscribe(()=>{this.refresh()});let w=_.asObservable(),P=w.pipe(v(tr));Object.defineProperty(P,"state",{value:ii(P,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=w,this.state=P}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new pt(i,+Date.now()))}refresh(){this.dispatch(new ce)}reset(){this.dispatch(new ue(+Date.now()))}rollback(){this.dispatch(new pe(+Date.now()))}commit(){this.dispatch(new le(+Date.now()))}sweep(){this.dispatch(new de)}toggleAction(i){this.dispatch(new he(i))}jumpToAction(i){this.dispatch(new me(i))}jumpToState(i){this.dispatch(new fe(i))}importState(i){this.dispatch(new ge(i))}lockChanges(i){this.dispatch(new Ee(i))}pauseRecording(i){this.dispatch(new Ae(i))}};t.\u0275fac=function(r){return new(r||t)(d($t),d(Ot),d(oi),d(or),d(ai),d(Tt),d(ri),d(zt))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function Hi({ngZone:e,connectInZone:t}){return o=>t?new Zt(i=>o.subscribe({next:r=>e.run(()=>i.next(r)),error:r=>e.run(()=>i.error(r)),complete:()=>e.run(()=>i.complete())})):o}var qr=new U("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Zr(e,t){return!!e||t.monitor!==Qi}function Yr(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function Jr(e={}){return tt([or,$t,Vi,{provide:Ui,useValue:e},{provide:qr,deps:[Ie,zt],useFactory:Zr},{provide:Ie,useFactory:Yr},{provide:zt,deps:[Ui],useFactory:zr},{provide:ci,deps:[Vi],useFactory:Xr},{provide:si,useExisting:$t}])}function Xr(e){return e.state}var ar=(()=>{let t=class t{static instrument(i={}){return{ngModule:t,providers:[Jr(i)]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=k({});let e=t;return e})();var lr="@ngrx/router-store/request",Zn=ot(lr,st()),dr="@ngrx/router-store/navigation",Yn=ot(dr,st()),hr="@ngrx/router-store/cancel",Jn=ot(hr,st()),fr="@ngrx/router-store/error",Xn=ot(fr,st()),mr="@ngrx/router-store/navigated",Qn=ot(mr,st());var Vt=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let o=t.children.map(i=>this.serializeRoute(i));return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:typeof t.routeConfig.title=="string"?t.routeConfig.title:void 0}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:o[0],children:o}}},Te=function(e){return e[e.PreActivation=1]="PreActivation",e[e.PostActivation=2]="PostActivation",e}(Te||{}),Qr="router",cr=new U("@ngrx/router-store Internal Configuration"),gr=new U("@ngrx/router-store Configuration");function tn(e){return l({stateKey:Qr,serializer:Vt,navigationActionTiming:Te.PreActivation},e)}var Ht=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let o=t.children.map(i=>this.serializeRoute(i));return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:t.routeConfig.title}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:o[0],pathFromRoot:void 0,children:o}}},Bt=class{},z=function(e){return e[e.NONE=1]="NONE",e[e.ROUTER=2]="ROUTER",e[e.STORE=3]="STORE",e}(z||{}),ur=(()=>{let t=class t{constructor(i,r,n,a,s,c){this.store=i,this.router=r,this.serializer=n,this.errorHandler=a,this.config=s,this.activeRuntimeChecks=c,this.lastEvent=null,this.routerState=null,this.trigger=z.NONE,this.stateKey=this.config.stateKey,!pi()&&Ge()&&(c?.strictActionSerializability||c?.strictStateSerializability)&&this.serializer instanceof Ht&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(ui(this.stateKey),G(this.store)).subscribe(([i,r])=>{this.navigateIfNeeded(i,r)})}navigateIfNeeded(i,r){if(!i||!i.state||this.trigger===z.ROUTER||this.lastEvent instanceof ne)return;let n=i.state.url;en(this.router.url,n)||(this.storeState=r,this.trigger=z.STORE,this.router.navigateByUrl(n).catch(a=>{this.errorHandler.handleError(a)}))}setUpRouterEventsListener(){let i=this.config.navigationActionTiming===Te.PostActivation,r;this.router.events.pipe(G(this.store)).subscribe(([n,a])=>{this.lastEvent=n,n instanceof ne?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==z.STORE&&(this.storeState=a,this.dispatchRouterRequest(n))):n instanceof se?(r=n,!i&&this.trigger!==z.STORE&&this.dispatchRouterNavigation(n)):n instanceof fi?(this.dispatchRouterCancel(n),this.reset()):n instanceof oe?(this.dispatchRouterError(n),this.reset()):n instanceof hi&&(this.trigger!==z.STORE&&(i&&this.dispatchRouterNavigation(r),this.dispatchRouterNavigated(n)),this.reset())})}dispatchRouterRequest(i){this.dispatchRouterAction(lr,{event:i})}dispatchRouterNavigation(i){let r=this.serializer.serialize(i.state);this.dispatchRouterAction(dr,{routerState:r,event:new se(i.id,i.url,i.urlAfterRedirects,r)})}dispatchRouterCancel(i){this.dispatchRouterAction(hr,{storeState:this.storeState,event:i})}dispatchRouterError(i){this.dispatchRouterAction(fr,{storeState:this.storeState,event:new oe(i.id,i.url,`${i}`)})}dispatchRouterNavigated(i){let r=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(mr,{event:i,routerState:r})}dispatchRouterAction(i,r){this.trigger=z.ROUTER;try{this.store.dispatch({type:i,payload:m(l({routerState:this.routerState},r),{event:this.config.routerState===0?r.event:{id:r.event.id,url:r.event.url,urlAfterRedirects:r.event.urlAfterRedirects}})})}finally{this.trigger=z.NONE}}reset(){this.trigger=z.NONE,this.storeState=null,this.routerState=null}};t.\u0275fac=function(r){return new(r||t)(d(M),d(kt),d(Bt),d(Tt),d(gr),d(ni))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function en(e,t){return pr(e)===pr(t)}function pr(e){return e?.length>0&&e[e.length-1]==="/"?e.substring(0,e.length-1):e}function rn(e={}){return tt([{provide:cr,useValue:e},{provide:gr,useFactory:tn,deps:[cr]},{provide:Bt,useClass:e.serializer?e.serializer:e.routerState===0?Ht:Vt},{provide:ze,multi:!0,useFactory(){return()=>It(ur)}},ur])}var Er=(()=>{let t=class t{static forRoot(i={}){return{ngModule:t,providers:[rn(i)]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=k({});let e=t;return e})();var Z={production:!0,firebaseAPIKey:"AIzaSyD3WTKawfW0EbkBajSJs4yTImF7_JbVkrY"};var nn=[{path:"",redirectTo:"/recipes",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-OE2LEDXR.js").then(e=>e.AuthModule)},{path:"recipes",loadChildren:()=>import("./chunk-SAXFO4YA.js").then(e=>e.RecipesModule)},{path:"shopping-list",loadChildren:()=>import("./chunk-XQKI6ESN.js").then(e=>e.ShoppingListModule)}],Wt=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=k({imports:[ae.forRoot(nn,{preloadingStrategy:Ai}),ae]});let e=t;return e})();var Ar=(()=>{let t=class t{constructor(i){this.store=i}intercept(i,r){return this.store.select("auth").pipe(L(1),v(n=>n.user),je(n=>{if(!n)return r.handle(i);let a=i.clone({params:new Ye().set("auth",n.token)});return r.handle(a)}))}};t.\u0275fac=function(r){return new(r||t)(d(M))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Gt=(()=>{let t=class t{constructor(i){this.store=i}setLogoutTimer(i){this.tokenExpirationTimer=setTimeout(()=>{this.store.dispatch(W())},i)}clearLogoutTimer(){this.tokenExpirationTimer&&(clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null)}};t.\u0275fac=function(r){return new(r||t)(d(M))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Ir=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=k({providers:[Mi,Gt,Ni,Wt,{provide:Je,useClass:Ar,multi:!0}]});let e=t;return e})();var sn=()=>[1,2,3];function an(e,t){e&1&&rt(0,"span",14)}function cn(e,t){e&1&&(R(0,"a",15),$(1,"Recipes"),b())}function un(e,t){e&1&&(R(0,"a",16),$(1,"Authenticate"),b())}function pn(e,t){if(e&1){let o=Qt();R(0,"a",17),nt("click",function(){St(o);let r=wt();return yt(r.onLogout())}),$(1,"Logout"),b()}}function ln(e,t){if(e&1){let o=Qt();R(0,"li",18)(1,"a",19),$(2,"Manage "),rt(3,"span",20),b(),R(4,"ul",21)(5,"li")(6,"a",17),nt("click",function(){St(o);let r=wt();return yt(r.onSaveData())}),$(7,"Save Data"),b()(),R(8,"li")(9,"a",17),nt("click",function(){St(o);let r=wt();return yt(r.onFetchData())}),$(10,"Fetch Data"),b()()()()}}var Sr=(()=>{let t=class t{constructor(i){this.store=i,this.collapsed=!0,this.isAuthenticated=!1}ngOnInit(){this.userSub=this.store.select("auth").pipe(v(i=>i.user)).subscribe(i=>{this.isAuthenticated=!!i})}onSaveData(){this.store.dispatch(jt())}onFetchData(){this.store.dispatch(_t())}onLogout(){this.store.dispatch(W())}ngOnDestroy(){this.userSub.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(Rt(M))},t.\u0275cmp=vt({type:t,selectors:[["app-header"]],decls:20,vars:8,consts:[[1,"navbar","navbar-default"],[1,"container-fluid"],[1,"navbar-header"],["type","button",1,"navbar-toggle",3,"click"],["class","icon-bar",4,"ngFor","ngForOf"],[1,"navbar-brand",2,"cursor","pointer"],[1,"navbar-collapse",3,"resize"],[1,"nav","navbar-nav"],["routerLinkActive","active","routerLink","/recipes",4,"ngIf"],["routerLinkActive","active","routerLink","/auth",4,"ngIf"],["routerLinkActive","active","routerLink","/shopping-list"],[1,"nav","navbar-nav","navbar-right"],["style","cursor: pointer",3,"click",4,"ngIf"],["class","dropdown","appDropdown","",4,"ngIf"],[1,"icon-bar"],["routerLinkActive","active","routerLink","/recipes"],["routerLinkActive","active","routerLink","/auth"],[2,"cursor","pointer",3,"click"],["appDropdown","",1,"dropdown"],["role","button",1,"dropdown-toggle",2,"cursor","pointer"],[1,"caret"],[1,"dropdown-menu"]],template:function(r,n){r&1&&(R(0,"nav",0)(1,"div",1)(2,"div",2)(3,"button",3),nt("click",function(){return n.collapsed=!n.collapsed}),et(4,an,1,0,"span",4),b(),R(5,"a",5),$(6,"Recipe Book"),b()(),R(7,"div",6),nt("resize",function(){return n.collapsed=!0},!1,He),R(8,"ul",7)(9,"li"),et(10,cn,2,0,"a",8),b(),R(11,"li"),et(12,un,2,0,"a",9),b(),R(13,"li")(14,"a",10),$(15,"Shopping List"),b()()(),R(16,"ul",11)(17,"li"),et(18,pn,2,0,"a",12),b(),et(19,ln,11,0,"li",13),b()()()()),r&2&&(q(4),it("ngForOf",We(7,sn)),q(3),Be("collapse",n.collapsed),q(3),it("ngIf",n.isAuthenticated),q(2),it("ngIf",!n.isAuthenticated),q(6),it("ngIf",n.isAuthenticated),q(),it("ngIf",n.isAuthenticated))},dependencies:[qe,Ze,gi,Ei,Ii]});let e=t;return e})();var yr=(()=>{let t=class t{constructor(i){this.store=i}ngOnInit(){this.store.dispatch(Dt())}};t.\u0275fac=function(r){return new(r||t)(Rt(M))},t.\u0275cmp=vt({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12"]],template:function(r,n){r&1&&(rt(0,"app-header"),R(1,"div",0)(2,"div",1)(3,"div",2),rt(4,"router-outlet"),b()()())},dependencies:[mi,Sr]});let e=t;return e})();var hn={ingredients:[],editedIngrident:null,editedIngridentIndex:-1};function Tr(e,t){let o=e.ingredients.find(i=>i.name===t.name);if(o){let i=m(l({},o),{amount:o.amount+t.amount}),r=[...e.ingredients];return r[e.ingredients.indexOf(o)]=i,m(l({},e),{ingredients:r})}return m(l({},e),{ingredients:[...e.ingredients,t]})}var Rr=at(hn,y(bi,(e,t)=>Tr(e,t.ingredient)),y(wi,(e,t)=>{for(let o of t.ingredients)e=Tr(e,o);return e}),y(xi,(e,t)=>{let o=e.ingredients[e.editedIngridentIndex],i=e.ingredients.find(r=>r.name===t.ingredient.name);if(i&&e.ingredients.indexOf(i)!==e.editedIngridentIndex){let r=i.amount+t.ingredient.amount,n=m(l(l({},i),t.ingredient),{amount:r}),a=[...e.ingredients];return a[e.editedIngridentIndex]=n,a.splice(e.ingredients.indexOf(i),1),m(l({},e),{ingredients:a,editedIngrident:null,editedIngridentIndex:-1})}else{let r=l(l({},o),t.ingredient),n=[...e.ingredients];return n[e.editedIngridentIndex]=r,m(l({},e),{ingredients:n,editedIngrident:null,editedIngridentIndex:-1})}}),y(Oi,e=>m(l({},e),{ingredients:e.ingredients.filter((t,o)=>o!==e.editedIngridentIndex),editedIngrident:null,editedIngridentIndex:-1})),y(Ci,(e,t)=>m(l({},e),{editedIngridentIndex:t.index,editedIngrident:l({},e.ingredients[t.index])})),y(ki,e=>m(l({},e),{editedIngrident:null,editedIngridentIndex:-1})));var Y=class{constructor(t,o,i,r){this.email=t,this.id=o,this._token=i,this._tokenExpirationDate=r}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}};var mn={user:null,authError:null,loading:!1},br=at(mn,y(Mt,Nt,e=>m(l({},e),{authError:null,loading:!0})),y(ct,(e,t)=>m(l({},e),{user:new Y(t.email,t.userId,t.token,t.expirationDate),authError:null,loading:!1})),y(ht,(e,t)=>m(l({},e),{user:null,authError:t.errorMessage,loading:!1})),y(W,e=>m(l({},e),{user:null})),y(Si,e=>m(l({},e),{authError:null})));var En={recipes:[]},wr=at(En,y(Lt,(e,t)=>m(l({},e),{recipes:[...t.recipes]})),y(yi,(e,t)=>m(l({},e),{recipes:[...e.recipes,t.recipe]})),y(Ti,(e,t)=>{let o=l(l({},e.recipes[t.index]),t.newRecipe),i=[...e.recipes];return i[t.index]=o,m(l({},e),{recipes:i})}),y(Ri,(e,t)=>m(l({},e),{recipes:e.recipes.filter((o,i)=>i!==t.index)})));var xr={shoppingList:Rr,auth:br,recipes:wr};var Or=(e,t,o,i)=>{let r=new Date(new Date().getTime()+i*1e3),n=new Y(e,t,o,r);return localStorage.setItem("userData",JSON.stringify(n)),ct({email:e,userId:t,token:o,expirationDate:r,redirect:!0})},Cr=e=>{let t="An unknown error occurred!";if(!e.error||!e.error.error)return F(ht({errorMessage:t}));switch(e.error.error.message){case"EMAIL_EXISTS":t="This email already exists";break;case"OPERATION_NOT_ALLOWED":t="Password sign-in is disabled for this project";break;case"TOO_MANY_ATTEMPTS_TRY_LATER":t="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"EMAIL_NOT_FOUND":t="This email does not exist";break;case"INVALID_PASSWORD":t="This password is not correct";break;case"USER_DISABLED":t="This user has been disabled";break;case"INVALID_LOGIN_CREDENTIALS":t="Invalid login credentials";break}return F(ht({errorMessage:t}))},kr=(()=>{let t=class t{constructor(i,r,n,a){this.actions$=i,this.http=r,this.router=n,this.authService=a,this.authSignup=V(()=>this.actions$.pipe(H(Nt),x(s=>this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+Z.firebaseAPIKey,{email:s.email,password:s.password,returnSecureToken:!0}).pipe(K(c=>{this.authService.setLogoutTimer(+c.expiresIn*1e3)}),v(c=>Or(c.email,c.localId,c.idToken,+c.expiresIn)),dt(c=>Cr(c)))))),this.authLogin=V(()=>this.actions$.pipe(H(Mt),x(s=>this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+Z.firebaseAPIKey,{email:s.email,password:s.password,returnSecureToken:!0}).pipe(K(c=>{this.authService.setLogoutTimer(+c.expiresIn*1e3)}),v(c=>Or(c.email,c.localId,c.idToken,+c.expiresIn)),dt(c=>Cr(c)))))),this.autoLogin=V(()=>this.actions$.pipe(H(Dt),v(()=>{let s=JSON.parse(localStorage.getItem("userData"));if(!s)return{type:"DUMMY"};let c=new Y(s.email,s.id,s._token,new Date(s._tokenExpirationDate));if(c.token){let h=new Date(s._tokenExpirationDate).getTime()-new Date().getTime();return this.authService.setLogoutTimer(h),ct({email:c.email,userId:c.id,token:c.token,expirationDate:new Date(s._tokenExpirationDate),redirect:!1})}return{type:"DUMMY"}}))),this.authLogout=V(()=>this.actions$.pipe(H(W),K(()=>{this.authService.clearLogoutTimer(),localStorage.removeItem("userData"),this.router.navigate(["/auth"])})),{dispatch:!1}),this.authRedirect=V(()=>this.actions$.pipe(H(ct),K(s=>{s.redirect&&this.router.navigate(["/"])})),{dispatch:!1})}};t.\u0275fac=function(r){return new(r||t)(d(Ct),d(xt),d(kt),d(Gt))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Nr=(()=>{let t=class t{constructor(i,r,n){this.actions$=i,this.http=r,this.store=n,this.fetchRecipes=V(()=>this.actions$.pipe(H(_t),x(a=>this.http.get("https://ng-complete-guide-68f37-default-rtdb.firebaseio.com/recipes.json")),v(a=>a.map(s=>m(l({},s),{ingredients:s.ingredients?s.ingredients:[]}))),v(a=>Lt({recipes:a})))),this.storeRecipes=V(()=>this.actions$.pipe(H(jt),G(this.store.select("recipes")),x(([a,s])=>this.http.put("https://ng-complete-guide-68f37-default-rtdb.firebaseio.com/recipes.json",s.recipes))),{dispatch:!1})}};t.\u0275fac=function(r){return new(r||t)(d(Ct),d(xt),d(M))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Mr=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t,bootstrap:[yr]}),t.\u0275inj=k({providers:[Xe(Qe())],imports:[ei,Wt,Ir,vi,li.forRoot(xr),di.forRoot([kr,Nr]),Z.production?[]:ar.instrument(),Z.production?[]:Er.forRoot(),Fi.register("ngsw-worker.js",{enabled:Z.production,registrationStrategy:"registerWhenStable:30000"})]});let e=t;return e})();ti().bootstrapModule(Mr).catch(e=>console.error(e));
